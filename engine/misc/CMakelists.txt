include(${ASH_ROOT_DIR}/cmake/shader_compile.cmake)

add_custom_target("graphics_shader_generater" ALL)

set(SHADERS "")
list(APPEND SHADERS "${CMAKE_CURRENT_SOURCE_DIR}/engine/shader/debug.hlsl;vert;frag")
list(APPEND SHADERS "${CMAKE_CURRENT_SOURCE_DIR}/engine/shader/ui.hlsl;vert;frag")
list(APPEND SHADERS "${CMAKE_CURRENT_SOURCE_DIR}/engine/shader/standard.hlsl;vert;frag")
target_shader_compile(
    "graphics_shader_generater"
    "${SHADERS}"
    "${CMAKE_CURRENT_SOURCE_DIR}/engine/shader/generated"
    "${ASH_THIRD_PARTY_DIR}/Vulkan/glslangValidator.exe")
target_shader_compile(
    "graphics_shader_generater"
    "${SHADERS}"
    "${CMAKE_CURRENT_SOURCE_DIR}/engine/shader/generated"
    "${ASH_THIRD_PARTY_DIR}/DirectX/dxc/dxc.exe")

install(DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/engine/config DESTINATION bin/engine)
install(DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/engine/font DESTINATION bin/engine)
install(DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/engine/shader/generated/ DESTINATION bin/engine/shader)